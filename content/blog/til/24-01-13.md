---
title: "팝업에서 무한스크롤 구현시 주의"
date: "2024-01-13"
description: "팝업에서 무한스크롤이 잘 안돼요"
tags: [Til]
hashtags: [infinite, scroll, intersectionObserver, popup]
# thumbnail: /thumbnails/hello-world.jpg
# order: 32
draft: true
---

**OTL**

버튼을 눌렀을때 팔로우 리스트 팝업이 나오는 기능을 추가하려고 했다.

팔로우 리스트의 첫 페이지는 정상적으로 불러왔지만,

다음 페이지의 데이터가 제대로 불러와지지 않았다.

<br/>

**내가 고려했던것**

팔로우 수는 제한이 없기에 무한정 나올수 있다 -> 무한스크롤로 구현

버튼을 눌렀을때 딜레이 없이 바로 뜨도록 -> 팝업 컴포넌트에 dynamic import 미적용

<br/>

**TIL**

1. 페이지에서 사용자가 버튼을 눌러 팝업이 나타나기 전에 팝업 컴포넌트 코드를 받아오기 때문에 무한스크롤 옵저버 코드가 실행된다.

2. 로직이 실행될때는 렌더링이 안되어 있는 상태이므로, 해당 팝업내부의 스크롤이 화면에 나타나지 않기 때문에 IntersectionObserver가 제대로 동작하지 않을 수 있다.

3. 따라서 팝업 코드를 미리 import 하는게 아니라 아니라 버튼을 누를때 그때 improt 하면, 옵저버 코드가 팝업이 나타날때 실행되므로 무한스크롤이 정상적으로 동작한다.

4. 다만 이 경우 사용자가 버튼을 눌렀을때 데이터 요청하는 시간을 기다려야한다.

5. 다른 방법으로는 데이터는 미리 요청하고 팝업은 누르는 시점에 맞춰 가져오는 방법도 있다.

<br/>

근데 팔로우 리스트를 보지않는 사람도 일단 데이터 요청을 해둔다는것이 옳게 구현하는 방법인가 의문이 든다!
