---
title: "커뮤니티 기능 개발"
date: "2024-08-04"
description: "커뮤니티에는 어떤 가치가 최우선일까"
tags: [Til]
hashtags: [community, prefetch, post, comment]
# thumbnail: /thumbnails/hello-world.jpg
# order: 32
draft: true
---

### 커뮤니티 기능개발

개발전에 이 기능에 대해서는 어떤 가치가 제일 중요할지 고민했다.

커뮤니티는 사람들의 의견을 공유하는 공간으로

빠른 인터렉션이 중요하다고 생각했다.

개요

- 회원/비회원 -> 겹치는 데이터여부 확인

- ssr

- 프리패치

- 스켈레톤x

- 댓글을 입력했을때는 캐시 삭제

- 캐시 리셋과 리패치의 차이

---

같은 쿼리키임에도, 중복요청이 되는것을 확인.

- 같은 쿼리키에 대해서 중복요청을 하지 않는것으로 알고 있었음

1차적으로 get 쿼리를 통해서 현재 캐시되어있는지 확인

그리고 없다면 prefetch 요청

그리고 댓글의 경우에는 0이 아닐경우만 요청

---

한번더 나아가서 리스트에서 보여주는 데이터와

상세데이터가 완벽하게 동일했으므로, 상세 데이터를 굳이 요청하지않고

상세데이터 요청과 똑같은 쿼리키로 리스트중 하나의 게시글 데이터를 set함

그래서 요청자체를 없애버림

그렇다면 상세페이지에 들어가는것은 게시글을 클릭해야가능하므로 상세페이지 api는 이제 필요없냐? x

링크를 통해서 바로 접속할경우나 상세페이지에서 새로고침할 경우를 대비해서 필요하다.

이 경우에도 스켈레톤을 최대한 안보여주기 위해서 ssr로직으로 1차 대응

---

눈속임

페이지네이션에서 프리패치 - 페이지 번호에 부여 / 마지막페이지에서 컴포넌트 사이에 - 오늘의집

---

조회수 측정

리스트에서 넘기듯이 본걸 조회했다고 할 수 있을까?

- 더보기버튼

- 공감

- 유튜브 커뮤니티의 감지 방식

---

이렇다보니까 공감을 마구 누르면 조회수가 마구 올라가는 현상 발생
