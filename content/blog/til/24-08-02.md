---
title: "더 나은 컴포넌트 구조를 위한 고민"
date: "2024-08-02"
description: "여러가지 고민과 시도들"
tags: [Til]
hashtags: [component, architecture, frontend, develop]
# thumbnail: /thumbnails/hello-world.jpg
# order: 32
draft: true
---

### 참고링크

https://velog.io/@teo/MVI-Architecture

https://lean-mahogany-686.notion.site/3-2-SOLID-eb2358bcb6bd45d38d2eef0363642e1a

https://medium.com/@junep/%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-business-logic%EC%9D%98-%EB%B6%84%EB%A6%AC-adc10ae881ab

https://emewjin.github.io/feature-sliced-design/

### 코드의 가독성을 해치는 스타일 코드들

코드 가독성에 대한 고민을 하면서

가장 큰 걸림돌은 스타일코드라고 생각했다.

회사에서 쓰는 것이 mui라서 구조사이에 스타일 코드가 섞여있는 구조였다.

```tsx
<Box
  sx={{
    height: "40px",
    display: "flex",
    justifyContent: "center",
    alignItems: "center",
    mx: "auto",
  }}
>
  <Typography
    onClick={() => {
      closePopupBannar(REOPEN_INTERVAL_SEVEN_DAYS);
    }}
    variant="body2Bold"
    sx={{
      textDecoration: "underline",
      color: "white",
      p: "4px 16px",
    }}
  >
    {t("popup.doNotShowAWeek")}
  </Typography>
</Box>
```

예를들면 위와 같은 구조이다.

단순히 div안에 글자가 있는 구조인데 20줄의 코드가 되어버렸다.

---

먼저 가독성이 좋은 코드를 생각하기 전에

이미 작성된 코드를 다시 보는 경우에 대해서 먼저 생각했다.

1. 에러가 발생한 경우

2. 기능이 추가되는 경우

3. 스타일이 수정되는 경우

대략적으로 위와같은 경우가 떠오르는데

모든 경우에서 구조파악이 제일 중요했다.

이러한 경우에서 구조사이에 스타일코드가 있는 것은 상당히 구조파악에 어려움을 주었다.

<br/>

단점만 있었던것은 아니다.

개발하면서는 스타일을 바로바로 그 구조에 추가할 수 있었기 때문에

개발속도는 되게 빨랐다. 그리고 개발한 사람이 디자인을 수정할때도 빠르게 위치를 파악하여 수정할 수 있었다.

그러나 문제점도 명확했다.

다른사람이 해당부분을 수정하려고할때 스타일조차도 쉽게 손대기 어려웠다.

특히 반응형 문법과 삼항연산자가 섞여있는 경우에는 특정조건에서 동작하는 코드를 알기 어려웠다.

1단계 : ...() -> 어느정도 스타일코드 구분이 가능하지만 여전히

특정조건에서 동작하는 스타일 코드를 묶어보기 위해서 해당 조건에 대한 스타일코드를 따로 묶는 방법을 시도했다.

그래서 평상시 코드와 특정조건에서의 코드를 분리해서 바라볼 수 있었다.

2단계 : ChannelInfo.Mobile -> 완전히 분리가 가능하지만, 파일을 따로 할 필요가 있다. 중복 로직이 존재

특정 상황에서는 동일한 상황에 대해서 반응형 디자인이 완전히 다를때가 있었다.

안에 기능은 동일하나 디자인이 완전히 달라서 도저히 삼항 연산자로는 구분이 안되는 수준이었다.

그래서 해당 컴포넌트가 어떤 상황에서 쓰이는지에 대해서 명시적으로 전달하기 위해

객체를 사용하여 표기하였다.

3단계 : if문을 통한 구분 -> 현재 정착중

4단계 : 스타일을 감추고 로직을 중앙으로 모으기 -> 하위컴포넌트의 역할? styled component

5단계 : 순수함수 및 의존성 분리 -> 순수 컴포넌트

과도한 추상화 염려

6단계 : bottom - up 설계 시도

- 장점 : 컴포넌트 설계시 의존성을 줄이고 재사용율을 대폭 증가시킬 수 있다.

- 단점 : 개인적인 단점인데, 결국 컴포넌트들을 합치고 하나로 만드는 과정중에서의 설계가 top-down 보다 훨씬 어렵다. 물론 기획과 디자인이 지속가능하게 되어있다면 문제는 없을것이다.
